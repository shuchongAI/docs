---
title: "Claude æ¶ˆæ¯æ¥å£"
description: "
- å®Œå…¨å…¼å®¹ Claude Messages API æ ¼å¼

- æ”¯æŒå¤šè½®å¯¹è¯å’Œå•æ¬¡æŸ¥è¯¢

- æ”¯æŒæ–‡æœ¬ã€å›¾åƒç­‰å¤šæ¨¡æ€å†…å®¹
"
api: "POST https://api.apimart.ai/v1/messages"
---

<RequestExample>

```bash cURL
curl https://api.apimart.ai/v1/messages \
  -H "x-api-key: $API_KEY" \
  -H "anthropic-version: 2025-10-01" \
  -H "content-type: application/json" \
  -d '{
    "model": "claude-sonnet-4-5-20250929",
    "max_tokens": 1024,
    "messages": [
      {"role": "user", "content": "ä½ å¥½ï¼Œä¸–ç•Œ"}
    ]
  }'
```

```python Python
import anthropic

client = anthropic.Anthropic(
    api_key="YOUR_API_KEY",
    base_url="https://api.apimart.ai"
)

message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=[
        {"role": "user", "content": "ä½ å¥½ï¼Œä¸–ç•Œ"}
    ]
)

print(message.content)
```

```javascript JavaScript
import Anthropic from '@anthropic-ai/sdk';

const client = new Anthropic({
  apiKey: process.env.API_KEY,
  baseURL: 'https://api.apimart.ai'
});

const message = await client.messages.create({
  model: 'claude-sonnet-4-5-20250929',
  max_tokens: 1024,
  messages: [
    { role: 'user', content: 'ä½ å¥½ï¼Œä¸–ç•Œ' }
  ]
});

console.log(message.content);
```

```go Go
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "io/ioutil"
    "net/http"
    "os"
)

func main() {
    url := "https://api.apimart.ai/v1/messages"

    payload := map[string]interface{}{
        "model": "claude-sonnet-4-5-20250929",
        "max_tokens": 1024,
        "messages": []map[string]string{
            {
                "role":    "user",
                "content": "ä½ å¥½ï¼Œä¸–ç•Œ",
            },
        },
    }

    jsonData, _ := json.Marshal(payload)

    req, _ := http.NewRequest("POST", url, bytes.NewBuffer(jsonData))
    req.Header.Set("x-api-key", os.Getenv("API_KEY"))
    req.Header.Set("anthropic-version", "2025-10-01")
    req.Header.Set("Content-Type", "application/json")

    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        panic(err)
    }
    defer resp.Body.Close()

    body, _ := ioutil.ReadAll(resp.Body)
    fmt.Println(string(body))
}
```

```java Java
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.net.URI;

public class Main {
    public static void main(String[] args) throws Exception {
        String url = "https://api.apimart.ai/v1/messages";
        String apiKey = System.getenv("API_KEY");

        String payload = """
        {
          "model": "claude-sonnet-4-5-20250929",
          "max_tokens": 1024,
          "messages": [
            {
              "role": "user",
              "content": "ä½ å¥½ï¼Œä¸–ç•Œ"
            }
          ]
        }
        """;

        HttpClient client = HttpClient.newHttpClient();
        HttpRequest request = HttpRequest.newBuilder()
            .uri(URI.create(url))
            .header("x-api-key", apiKey)
            .header("anthropic-version", "2025-10-01")
            .header("Content-Type", "application/json")
            .POST(HttpRequest.BodyPublishers.ofString(payload))
            .build();

        HttpResponse<String> response = client.send(request,
            HttpResponse.BodyHandlers.ofString());

        System.out.println(response.body());
    }
}
```

```php PHP
<?php

$url = "https://api.apimart.ai/v1/messages";
$apiKey = getenv('API_KEY');

$payload = [
    "model" => "claude-sonnet-4-5-20250929",
    "max_tokens" => 1024,
    "messages" => [
        [
            "role" => "user",
            "content" => "ä½ å¥½ï¼Œä¸–ç•Œ"
        ]
    ]
];

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($payload));
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    "x-api-key: " . $apiKey,
    "anthropic-version: 2025-10-01",
    "Content-Type: application/json"
]);

$response = curl_exec($ch);
curl_close($ch);

echo $response;
?>
```

```ruby Ruby
require 'net/http'
require 'json'
require 'uri'

url = URI("https://api.apimart.ai/v1/messages")
api_key = ENV['API_KEY']

payload = {
  model: "claude-sonnet-4-5-20250929",
  max_tokens: 1024,
  messages: [
    {
      role: "user",
      content: "ä½ å¥½ï¼Œä¸–ç•Œ"
    }
  ]
}

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true

request = Net::HTTP::Post.new(url)
request["x-api-key"] = api_key
request["anthropic-version"] = "2025-10-01"
request["Content-Type"] = "application/json"
request.body = payload.to_json

response = http.request(request)
puts response.body
```

```swift Swift
import Foundation

let url = URL(string: "https://api.apimart.ai/v1/messages")!
let apiKey = ProcessInfo.processInfo.environment["API_KEY"] ?? ""

let payload: [String: Any] = [
    "model": "claude-sonnet-4-5-20250929",
    "max_tokens": 1024,
    "messages": [
        [
            "role": "user",
            "content": "ä½ å¥½ï¼Œä¸–ç•Œ"
        ]
    ]
]

var request = URLRequest(url: url)
request.httpMethod = "POST"
request.setValue(apiKey, forHTTPHeaderField: "x-api-key")
request.setValue("2025-10-01", forHTTPHeaderField: "anthropic-version")
request.setValue("application/json", forHTTPHeaderField: "Content-Type")
request.httpBody = try? JSONSerialization.data(withJSONObject: payload)

let task = URLSession.shared.dataTask(with: request) { data, response, error in
    if let error = error {
        print("Error: \(error)")
        return
    }
    
    if let data = data, let responseString = String(data: data, encoding: .utf8) {
        print(responseString)
    }
}

task.resume()
```

```csharp C#
using System;
using System.Net.Http;
using System.Text;
using System.Threading.Tasks;

class Program
{
    static async Task Main(string[] args)
    {
        var url = "https://api.apimart.ai/v1/messages";
        var apiKey = Environment.GetEnvironmentVariable("API_KEY");

        var payload = @"{
            ""model"": ""claude-sonnet-4-5-20250929"",
            ""max_tokens"": 1024,
            ""messages"": [
                {
                    ""role"": ""user"",
                    ""content"": ""ä½ å¥½ï¼Œä¸–ç•Œ""
                }
            ]
        }";

        using var client = new HttpClient();
        client.DefaultRequestHeaders.Add("x-api-key", apiKey);
        client.DefaultRequestHeaders.Add("anthropic-version", "2025-10-01");

        var content = new StringContent(payload, Encoding.UTF8, "application/json");
        var response = await client.PostAsync(url, content);
        var result = await response.Content.ReadAsStringAsync();

        Console.WriteLine(result);
    }
}
```

```c C
#include <stdio.h>
#include <curl/curl.h>
#include <stdlib.h>

int main(void) {
    CURL *curl;
    CURLcode res;
    const char *api_key = getenv("API_KEY");

    curl_global_init(CURL_GLOBAL_DEFAULT);
    curl = curl_easy_init();

    if(curl) {
        const char *url = "https://api.apimart.ai/v1/messages";
        const char *payload = "{"
            "\"model\":\"claude-sonnet-4-5-20250929\","
            "\"max_tokens\":1024,"
            "\"messages\":[{\"role\":\"user\",\"content\":\"ä½ å¥½ï¼Œä¸–ç•Œ\"}]"
        "}";

        char auth_header[256];
        snprintf(auth_header, sizeof(auth_header), "x-api-key: %s", api_key);

        struct curl_slist *headers = NULL;
        headers = curl_slist_append(headers, auth_header);
        headers = curl_slist_append(headers, "anthropic-version: 2025-10-01");
        headers = curl_slist_append(headers, "Content-Type: application/json");

        curl_easy_setopt(curl, CURLOPT_URL, url);
        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, payload);
        curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);

        res = curl_easy_perform(curl);

        if(res != CURLE_OK) {
            fprintf(stderr, "curl_easy_perform() failed: %s\n",
                    curl_easy_strerror(res));
        }

        curl_slist_free_all(headers);
        curl_easy_cleanup(curl);
    }

    curl_global_cleanup();
    return 0;
}
```

```objectivec Objective-C
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        NSURL *url = [NSURL URLWithString:@"https://api.apimart.ai/v1/messages"];
        NSString *apiKey = [NSProcessInfo processInfo].environment[@"API_KEY"];
        
        NSDictionary *payload = @{
            @"model": @"claude-sonnet-4-5-20250929",
            @"max_tokens": @1024,
            @"messages": @[
                @{
                    @"role": @"user",
                    @"content": @"ä½ å¥½ï¼Œä¸–ç•Œ"
                }
            ]
        };
        
        NSError *error;
        NSData *jsonData = [NSJSONSerialization dataWithJSONObject:payload
                                                          options:0
                                                            error:&error];
        
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
        [request setHTTPMethod:@"POST"];
        [request setValue:apiKey forHTTPHeaderField:@"x-api-key"];
        [request setValue:@"2025-10-01" forHTTPHeaderField:@"anthropic-version"];
        [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:jsonData];
        
        NSURLSessionDataTask *task = [[NSURLSession sharedSession] 
            dataTaskWithRequest:request
            completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                if (error) {
                    NSLog(@"Error: %@", error);
                    return;
                }
                NSString *result = [[NSString alloc] initWithData:data 
                                                        encoding:NSUTF8StringEncoding];
                NSLog(@"%@", result);
            }];
        
        [task resume];
        [[NSRunLoop mainRunLoop] run];
    }
    return 0;
}
```

```ocaml OCaml
(* Requires cohttp and yojson libraries *)
open Lwt
open Cohttp
open Cohttp_lwt_unix

let url = "https://api.apimart.ai/v1/messages"
let api_key = Sys.getenv "API_KEY"

let payload = {|{
  "model": "claude-sonnet-4-5-20250929",
  "max_tokens": 1024,
  "messages": [
    {
      "role": "user",
      "content": "ä½ å¥½ï¼Œä¸–ç•Œ"
    }
  ]
}|}

let () =
  let headers = Header.init ()
    |> fun h -> Header.add h "x-api-key" api_key
    |> fun h -> Header.add h "anthropic-version" "2025-10-01"
    |> fun h -> Header.add h "Content-Type" "application/json"
  in
  let body = Cohttp_lwt.Body.of_string payload in
  
  let response = Client.post ~headers ~body (Uri.of_string url) >>= fun (resp, body) ->
    body |> Cohttp_lwt.Body.to_string >|= fun body_str ->
    print_endline body_str
  in
  Lwt_main.run response
```

```dart Dart
import 'dart:convert';
import 'dart:io';
import 'package:http/http.dart' as http;

void main() async {
  final url = Uri.parse('https://api.apimart.ai/v1/messages');
  final apiKey = Platform.environment['API_KEY'];
  
  final payload = {
    'model': 'claude-sonnet-4-5-20250929',
    'max_tokens': 1024,
    'messages': [
      {
        'role': 'user',
        'content': 'ä½ å¥½ï¼Œä¸–ç•Œ'
      }
    ]
  };
  
  final response = await http.post(
    url,
    headers: {
      'x-api-key': apiKey!,
      'anthropic-version': '2025-10-01',
      'Content-Type': 'application/json',
    },
    body: jsonEncode(payload),
  );
  
  print(response.body);
}
```

```r R
library(httr)
library(jsonlite)

url <- "https://api.apimart.ai/v1/messages"
api_key <- Sys.getenv("API_KEY")

payload <- list(
  model = "claude-sonnet-4-5-20250929",
  max_tokens = 1024,
  messages = list(
    list(
      role = "user",
      content = "ä½ å¥½ï¼Œä¸–ç•Œ"
    )
  )
)

response <- POST(
  url,
  add_headers(
    `x-api-key` = api_key,
    `anthropic-version` = "2025-10-01",
    `Content-Type` = "application/json"
  ),
  body = toJSON(payload, auto_unbox = TRUE),
  encode = "raw"
)

cat(content(response, "text"))
```

</RequestExample>

<ResponseExample>

```json 200
{
  "code": 200,
  "data": {
    "id": "msg_013Zva2CMHLNnXjNJJKqJ2EF",
    "type": "message",
    "role": "assistant",
    "content": [
      {
        "type": "text",
        "text": "ä½ å¥½ï¼æˆ‘æ˜¯Claudeã€‚å¾ˆé«˜å…´è§åˆ°ä½ ã€‚"
      }
    ],
    "model": "claude-sonnet-4-5-20250929",
    "stop_reason": "end_turn",
    "stop_sequence": null,
    "usage": {
      "input_tokens": 12,
      "output_tokens": 18
    }
  }
}
```

```json 400
{
  "type": "error",
  "error": {
    "type": "invalid_request_error",
    "message": "è¯·æ±‚å‚æ•°æ— æ•ˆ"
  }
}
```

```json 401
{
  "type": "error",
  "error": {
    "type": "authentication_error",
    "message": "æ— æ•ˆçš„APIå¯†é’¥"
  }
}
```

```json 429
{
  "type": "error",
  "error": {
    "type": "rate_limit_error",
    "message": "è¯·æ±‚è¿‡äºé¢‘ç¹"
  }
}
```

```json 500
{
  "type": "error",
  "error": {
    "type": "api_error",
    "message": "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"
  }
}
```

</ResponseExample>

## Authorizations

<ParamField header="x-api-key" type="string" required>
  APIå¯†é’¥ç”¨äºèº«ä»½éªŒè¯

  è®¿é—® [API Key ç®¡ç†é¡µé¢](https://api.apimart.ai/console/token) è·å–æ‚¨çš„ API Key

  åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ï¼š
  ```
  x-api-key: YOUR_API_KEY
  ```
</ParamField>

<ParamField header="anthropic-version" type="string" required>
  APIç‰ˆæœ¬å·

  æŒ‡å®šè¦ä½¿ç”¨çš„Claude APIç‰ˆæœ¬

  ç¤ºä¾‹ï¼š`2025-10-01`
</ParamField>

## Body

<ParamField body="model" type="string" required default="claude-haiku-4-5-20251001">
  æ¨¡å‹åç§°

  - `claude-haiku-4-5-20251001` - Claude 4.5 å¿«é€Ÿå“åº”ç‰ˆæœ¬
  - `claude-sonnet-4-5-20250929` - Claude 4.5 å¹³è¡¡ç‰ˆæœ¬
  - `claude-opus-4-1-20250805` - æœ€å¼ºå¤§çš„ Claude 4.1 æ——èˆ°æ¨¡å‹
  - `claude-opus-4-1-20250805-thinking` - Claude 4.1 Opus æ·±åº¦æ€è€ƒç‰ˆ
  - `claude-sonnet-4-5-20250929-thinking` - Claude 4.5 Sonnet æ·±åº¦æ€è€ƒç‰ˆ
</ParamField>

<ParamField body="messages" type="array" required>
  æ¶ˆæ¯åˆ—è¡¨

  æ¶ˆæ¯æ•°ç»„ï¼Œæ¨¡å‹ä¼šåŸºäºè¿™äº›æ¶ˆæ¯ç”Ÿæˆä¸‹ä¸€æ¡å›å¤ã€‚æ¯æ¡æ¶ˆæ¯åŒ…å« `role` å’Œ `content` ä¸¤ä¸ªå­—æ®µã€‚

  **ğŸ’¡ å¿«é€Ÿå¡«å†™ï¼ˆTry it åŒºåŸŸï¼‰ï¼š**
  1. ç‚¹å‡» "+ Add an item" æ·»åŠ ä¸€æ¡æ¶ˆæ¯
  2. `role` è¾“å…¥ï¼š`user`ï¼ˆç”¨æˆ·æ¶ˆæ¯ï¼‰æˆ– `assistant`ï¼ˆAIå›å¤ï¼Œç”¨äºå¤šè½®å¯¹è¯ï¼‰
  3. `content` è¾“å…¥ï¼šä½ æƒ³è¯´çš„è¯
  
  <Expandable title="è¯¦ç»†å­—æ®µè¯´æ˜">
    <ParamField body="role" type="string" required default="user">
      è§’è‰²ç±»å‹
      
      å¯é€‰å€¼ï¼š`user`ï¼ˆç”¨æˆ·æ¶ˆæ¯ï¼‰ã€`assistant`ï¼ˆAIå›å¤ï¼Œç”¨äºå¤šè½®å¯¹è¯å’Œé¢„å¡«å……ï¼‰
      
      æ³¨ï¼šClaude API çš„ system æç¤ºè¯ä½¿ç”¨å•ç‹¬çš„ `system` å‚æ•°ï¼Œä¸åœ¨ messages ä¸­
    </ParamField>

    <ParamField body="content" type="string" required>
      æ¶ˆæ¯å†…å®¹
      
      å¡«å†™æ¶ˆæ¯çš„æ–‡æœ¬å†…å®¹
    </ParamField>
  </Expandable>

  **å•æ¡ç”¨æˆ·æ¶ˆæ¯ç¤ºä¾‹ï¼š**
  ```json
  [{"role": "user", "content": "ä½ å¥½ï¼ŒClaude"}]
  ```

  **å¤šè½®å¯¹è¯ç¤ºä¾‹ï¼š**
  ```json
  [
    {"role": "user", "content": "ä½ å¥½"},
    {"role": "assistant", "content": "ä½ å¥½ï¼æˆ‘æ˜¯Claudeã€‚"},
    {"role": "user", "content": "èƒ½è§£é‡Šä¸€ä¸‹AIå—ï¼Ÿ"}
  ]
  ```

  **é¢„å¡«å……åŠ©æ‰‹å›å¤ï¼š**
  ```json
  [
    {"role": "user", "content": "å¤ªé˜³çš„å¸Œè…Šåç§°æ˜¯ï¼Ÿ(A) Sol (B) Helios (C) Sun"},
    {"role": "assistant", "content": "ç­”æ¡ˆæ˜¯ ("}
  ]
  ```
</ParamField>

<ParamField body="max_tokens" type="integer">
  æœ€å¤§ç”Ÿæˆtokenæ•°

  ç”Ÿæˆåœæ­¢å‰çš„æœ€å¤§tokenæ•°é‡ã€‚æ¨¡å‹å¯èƒ½ä¼šåœ¨è¾¾åˆ°æ­¤é™åˆ¶å‰åœæ­¢ã€‚

  ä¸åŒæ¨¡å‹æœ‰ä¸åŒçš„æœ€å¤§å€¼ï¼Œè¯·å‚è€ƒæ¨¡å‹æ–‡æ¡£ã€‚æœ€å°å€¼ï¼š1
</ParamField>

<ParamField body="system" type="string | array">
  ç³»ç»Ÿæç¤ºè¯

  ç³»ç»Ÿæç¤ºè¯ç”¨äºè®¾ç½®Claudeçš„è§’è‰²ã€ä¸ªæ€§ã€ç›®æ ‡å’ŒæŒ‡ä»¤ã€‚

  **å­—ç¬¦ä¸²æ ¼å¼ï¼š**
  ```json
  {
    "system": "ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„Pythonç¼–ç¨‹å¯¼å¸ˆ"
  }
  ```

  **ç»“æ„åŒ–æ ¼å¼ï¼š**
  ```json
  {
    "system": [
      {
        "type": "text",
        "text": "ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„Pythonç¼–ç¨‹å¯¼å¸ˆ"
      }
    ]
  }
  ```
</ParamField>

<ParamField body="temperature" type="number">
  æ¸©åº¦å‚æ•°ï¼ŒèŒƒå›´ 0-1

  æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§ï¼š
  - ä½å€¼ï¼ˆå¦‚0.2ï¼‰ï¼šæ›´ç¡®å®šã€æ›´ä¿å®ˆ
  - é«˜å€¼ï¼ˆå¦‚0.8ï¼‰ï¼šæ›´éšæœºã€æ›´æœ‰åˆ›æ„

  é»˜è®¤å€¼ï¼š1.0
</ParamField>

<ParamField body="top_p" type="number">
  æ ¸é‡‡æ ·å‚æ•°ï¼ŒèŒƒå›´ 0-1

  ä½¿ç”¨nucleus samplingã€‚å»ºè®®ä½¿ç”¨ `temperature` æˆ– `top_p` å…¶ä¸­ä¹‹ä¸€ï¼Œä¸è¦åŒæ—¶ä½¿ç”¨ã€‚

  é»˜è®¤å€¼ï¼š1.0
</ParamField>

<ParamField body="top_k" type="integer">
  Top-Ké‡‡æ ·

  åªä»æ¦‚ç‡æœ€é«˜çš„Kä¸ªé€‰é¡¹ä¸­é‡‡æ ·ï¼Œç”¨äºç§»é™¤"é•¿å°¾"ä½æ¦‚ç‡å“åº”ã€‚

  å»ºè®®ä»…åœ¨é«˜çº§ç”¨ä¾‹ä¸­ä½¿ç”¨ã€‚
</ParamField>

<ParamField body="stream" type="boolean">
  æ˜¯å¦å¯ç”¨æµå¼è¾“å‡º

  è®¾ç½®ä¸º `true` æ—¶ï¼Œä½¿ç”¨æœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆSSEï¼‰æµå¼è¿”å›å“åº”ã€‚

  é»˜è®¤å€¼ï¼šfalse
</ParamField>

<ParamField body="stop_sequences" type="array">
  åœæ­¢åºåˆ—

  è‡ªå®šä¹‰æ–‡æœ¬åºåˆ—ï¼Œé‡åˆ°è¿™äº›åºåˆ—æ—¶æ¨¡å‹å°†åœæ­¢ç”Ÿæˆã€‚

  æœ€å¤š4ä¸ªåºåˆ—ã€‚

  ç¤ºä¾‹ï¼š`["\n\nHuman:", "\n\nAssistant:"]`
</ParamField>

<ParamField body="metadata" type="object">
  å…ƒæ•°æ®

  ç”¨äºè¯·æ±‚çš„å…ƒæ•°æ®å¯¹è±¡ã€‚

  åŒ…å«ï¼š
  - `user_id`: ç”¨æˆ·æ ‡è¯†ç¬¦
</ParamField>

<ParamField body="tools" type="array">
  å·¥å…·å®šä¹‰

  å·¥å…·åˆ—è¡¨ï¼Œæ¨¡å‹å¯ä»¥è°ƒç”¨è¿™äº›å·¥å…·æ¥å®Œæˆä»»åŠ¡ã€‚

  **å‡½æ•°å·¥å…·ç¤ºä¾‹ï¼š**
  ```json
  {
    "tools": [
      {
        "name": "get_weather",
        "description": "è·å–æŒ‡å®šä½ç½®çš„å½“å‰å¤©æ°”",
        "input_schema": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string",
              "description": "åŸå¸‚å’Œçœä»½ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬"
            },
            "unit": {
              "type": "string",
              "enum": ["celsius", "fahrenheit"],
              "description": "æ¸©åº¦å•ä½"
            }
          },
          "required": ["location"]
        }
      }
    ]
  }
  ```

  æ”¯æŒçš„å·¥å…·ç±»å‹ï¼š
  - è‡ªå®šä¹‰å‡½æ•°å·¥å…·
  - è®¡ç®—æœºä½¿ç”¨å·¥å…·ï¼ˆcomputer_20241022ï¼‰
  - æ–‡æœ¬ç¼–è¾‘å™¨å·¥å…·ï¼ˆtext_editor_20241022ï¼‰
  - Bashå·¥å…·ï¼ˆbash_20241022ï¼‰
</ParamField>

<ParamField body="tool_choice" type="object">
  å·¥å…·é€‰æ‹©ç­–ç•¥

  æ§åˆ¶æ¨¡å‹å¦‚ä½•ä½¿ç”¨å·¥å…·ï¼š

  - `{"type": "auto"}`: è‡ªåŠ¨å†³å®šï¼ˆé»˜è®¤ï¼‰
  - `{"type": "any"}`: å¿…é¡»ä½¿ç”¨å·¥å…·
  - `{"type": "tool", "name": "tool_name"}`: ä½¿ç”¨æŒ‡å®šå·¥å…·
</ParamField>

## Response

<ResponseField name="id" type="string">
  å”¯ä¸€æ¶ˆæ¯æ ‡è¯†ç¬¦

  ç¤ºä¾‹ï¼š`"msg_013Zva2CMHLNnXjNJJKqJ2EF"`
</ResponseField>

<ResponseField name="type" type="string">
  å¯¹è±¡ç±»å‹

  å›ºå®šä¸º `"message"`
</ResponseField>

<ResponseField name="role" type="string">
  è§’è‰²

  å›ºå®šä¸º `"assistant"`
</ResponseField>

<ResponseField name="content" type="array">
  å†…å®¹å—æ•°ç»„

  æ¨¡å‹ç”Ÿæˆçš„å†…å®¹ï¼Œæ˜¯ä¸€ä¸ªå†…å®¹å—æ•°ç»„ã€‚

  **æ–‡æœ¬å†…å®¹ï¼š**
  ```json
  [{"type": "text", "text": "ä½ å¥½ï¼æˆ‘æ˜¯Claudeã€‚"}]
  ```

  **å·¥å…·ä½¿ç”¨ï¼š**
  ```json
  [
    {
      "type": "tool_use",
      "id": "toolu_01A09q90qw90lq917835lq9",
      "name": "get_weather",
      "input": {"location": "åŒ—äº¬", "unit": "celsius"}
    }
  ]
  ```

  å†…å®¹ç±»å‹ï¼š
  - `text`: æ–‡æœ¬å†…å®¹
  - `tool_use`: å·¥å…·è°ƒç”¨
</ResponseField>

<ResponseField name="model" type="string">
  å¤„ç†è¯·æ±‚çš„æ¨¡å‹

  ç¤ºä¾‹ï¼š`"claude-sonnet-4-5-20250929"`
</ResponseField>

<ResponseField name="stop_reason" type="string">
  åœæ­¢åŸå› 

  å¯èƒ½çš„å€¼ï¼š
  - `end_turn`: è‡ªç„¶ç»“æŸ
  - `max_tokens`: è¾¾åˆ°æœ€å¤§tokenæ•°
  - `stop_sequence`: é‡åˆ°åœæ­¢åºåˆ—
  - `tool_use`: è°ƒç”¨äº†å·¥å…·
</ResponseField>

<ResponseField name="stop_sequence" type="string | null">
  è§¦å‘çš„åœæ­¢åºåˆ—

  å¦‚æœå› åœæ­¢åºåˆ—è€Œåœæ­¢ï¼Œåˆ™ä¸ºè¯¥åºåˆ—å†…å®¹ï¼›å¦åˆ™ä¸º `null`
</ResponseField>

<ResponseField name="usage" type="object">
  Tokenä½¿ç”¨ç»Ÿè®¡

  <Expandable title="å±æ€§">
    <ResponseField name="input_tokens" type="integer">
      è¾“å…¥tokenæ•°
    </ResponseField>

    <ResponseField name="output_tokens" type="integer">
      è¾“å‡ºtokenæ•°
    </ResponseField>
  </Expandable>
</ResponseField>

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€å¯¹è¯

```python
import anthropic

client = anthropic.Anthropic(
    api_key="YOUR_API_KEY",
    base_url="https://api.apimart.ai"
)

message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=[
        {"role": "user", "content": "è§£é‡Šé‡å­è®¡ç®—çš„åŸºæœ¬åŸç†"}
    ]
)

print(message.content[0].text)
```

### å¤šè½®å¯¹è¯

```python
messages = [
    {"role": "user", "content": "ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ"},
    {"role": "assistant", "content": "æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯..."},
    {"role": "user", "content": "èƒ½ä¸¾ä¸ªå®é™…åº”ç”¨çš„ä¾‹å­å—ï¼Ÿ"}
]

message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=messages
)
```

### ä½¿ç”¨ç³»ç»Ÿæç¤ºè¯

```python
message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    system="ä½ æ˜¯ä¸€ä½èµ„æ·±çš„Pythonå¼€å‘ä¸“å®¶ï¼Œæ“…é•¿ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–å»ºè®®ã€‚",
    messages=[
        {"role": "user", "content": "å¦‚ä½•ä¼˜åŒ–è¿™æ®µä»£ç ï¼Ÿ\n\n[ä»£ç ]"}
    ]
)
```

### æµå¼å“åº”

```python
with client.messages.stream(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=[
        {"role": "user", "content": "å†™ä¸€ç¯‡å…³äºAIçš„çŸ­æ–‡"}
    ]
) as stream:
    for text in stream.text_stream:
        print(text, end="", flush=True)
```

### å·¥å…·ä½¿ç”¨

```python
tools = [
    {
        "name": "get_stock_price",
        "description": "è·å–è‚¡ç¥¨çš„å®æ—¶ä»·æ ¼",
        "input_schema": {
            "type": "object",
            "properties": {
                "ticker": {
                    "type": "string",
                    "description": "è‚¡ç¥¨ä»£ç ï¼Œä¾‹å¦‚ï¼šAAPL"
                }
            },
            "required": ["ticker"]
        }
    }
]

message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    tools=tools,
    messages=[
        {"role": "user", "content": "ç‰¹æ–¯æ‹‰çš„è‚¡ä»·æ˜¯å¤šå°‘ï¼Ÿ"}
    ]
)

# å¤„ç†å·¥å…·è°ƒç”¨
if message.stop_reason == "tool_use":
    tool_use = next(block for block in message.content if block.type == "tool_use")
    print(f"è°ƒç”¨å·¥å…·: {tool_use.name}")
    print(f"å‚æ•°: {tool_use.input}")
```

### è§†è§‰ç†è§£

```python
message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "image",
                    "source": {
                        "type": "url",
                        "url": "https://example.com/image.jpg"
                    }
                },
                {
                    "type": "text",
                    "text": "æè¿°è¿™å¼ å›¾ç‰‡"
                }
            ]
        }
    ]
)
```

### Base64å›¾åƒ

```python
import base64

with open("image.jpg", "rb") as image_file:
    image_data = base64.b64encode(image_file.read()).decode("utf-8")

message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "image",
                    "source": {
                        "type": "base64",
                        "media_type": "image/jpeg",
                        "data": image_data
                    }
                },
                {
                    "type": "text",
                    "text": "åˆ†æè¿™å¼ å›¾ç‰‡"
                }
            ]
        }
    ]
)
```

## æœ€ä½³å®è·µ

### 1. æç¤ºè¯å·¥ç¨‹

**æ¸…æ™°çš„è§’è‰²å®šä¹‰ï¼š**
```python
system = """ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„æ•°æ®ç§‘å­¦å®¶ï¼Œä¸“é•¿åŒ…æ‹¬ï¼š
- ç»Ÿè®¡åˆ†æå’Œæ•°æ®å¯è§†åŒ–
- æœºå™¨å­¦ä¹ æ¨¡å‹å¼€å‘
- Pythonå’ŒRç¼–ç¨‹
è¯·æä¾›ä¸“ä¸šã€å‡†ç¡®çš„å»ºè®®ã€‚"""
```

**ç»“æ„åŒ–è¾“å‡ºï¼š**
```python
message = "è¯·ä»¥JSONæ ¼å¼è¿”å›åˆ†æç»“æœï¼ŒåŒ…å«summaryã€key_findingså’Œrecommendationså­—æ®µã€‚"
```

### 2. é”™è¯¯å¤„ç†

```python
from anthropic import APIError, RateLimitError

try:
    message = client.messages.create(
        model="claude-sonnet-4-5-20250929",
        max_tokens=1024,
        messages=[{"role": "user", "content": "ä½ å¥½"}]
    )
except RateLimitError:
    print("é€Ÿç‡é™åˆ¶ï¼Œè¯·ç¨åé‡è¯•")
except APIError as e:
    print(f"APIé”™è¯¯: {e}")
```

### 3. Tokenä¼˜åŒ–

```python
# ä½¿ç”¨æ›´çŸ­çš„æç¤ºè¯
messages = [
    {"role": "user", "content": "æ€»ç»“è¦ç‚¹ï¼š\n\n[é•¿æ–‡æœ¬]"}
]

# é™åˆ¶è¾“å‡ºé•¿åº¦
message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=500,  # é™åˆ¶è¾“å‡º
    messages=messages
)
```

### 4. é¢„å¡«å……å“åº”

```python
# å¼•å¯¼æ¨¡å‹ä»¥ç‰¹å®šæ ¼å¼å›å¤
messages = [
    {"role": "user", "content": "åˆ—å‡º5ä¸ªPythonæœ€ä½³å®è·µ"},
    {"role": "assistant", "content": "ä»¥ä¸‹æ˜¯5ä¸ªPythonæœ€ä½³å®è·µï¼š\n\n1."}
]

message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=messages
)
```

## æµå¼å“åº”å¤„ç†

### Pythonæµå¼ç¤ºä¾‹

```python
import anthropic

client = anthropic.Anthropic(
    api_key="YOUR_API_KEY",
    base_url="https://api.apimart.ai"
)

with client.messages.stream(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=[
        {"role": "user", "content": "å†™ä¸€ä¸ªPythonè£…é¥°å™¨ç¤ºä¾‹"}
    ]
) as stream:
    for text in stream.text_stream:
        print(text, end="", flush=True)
```

### JavaScriptæµå¼ç¤ºä¾‹

```javascript
import Anthropic from '@anthropic-ai/sdk';

const client = new Anthropic({
  apiKey: process.env.API_KEY,
  baseURL: 'https://api.apimart.ai'
});

const stream = await client.messages.stream({
  model: 'claude-sonnet-4-5-20250929',
  max_tokens: 1024,
  messages: [
    { role: 'user', content: 'å†™ä¸€ä¸ªReactç»„ä»¶ç¤ºä¾‹' }
  ]
});

for await (const chunk of stream) {
  if (chunk.type === 'content_block_delta' && 
      chunk.delta.type === 'text_delta') {
    process.stdout.write(chunk.delta.text);
  }
}
```

## æ³¨æ„äº‹é¡¹

1. **APIå¯†é’¥å®‰å…¨**ï¼š
   - ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨APIå¯†é’¥
   - ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†é’¥
   - å®šæœŸè½®æ¢å¯†é’¥

2. **é€Ÿç‡é™åˆ¶**ï¼š
   - æ³¨æ„APIçš„é€Ÿç‡é™åˆ¶
   - å®ç°é‡è¯•æœºåˆ¶
   - ä½¿ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥

3. **Tokenç®¡ç†**ï¼š
   - ç›‘æ§tokenä½¿ç”¨é‡
   - ä¼˜åŒ–æç¤ºè¯é•¿åº¦
   - ä½¿ç”¨é€‚å½“çš„max_tokenså€¼

4. **æ¨¡å‹é€‰æ‹©**ï¼š
   - Opus: å¤æ‚ä»»åŠ¡ã€éœ€è¦æ·±åº¦æ€è€ƒ
   - Sonnet: å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬
   - Haiku: å¿«é€Ÿå“åº”ã€ç®€å•ä»»åŠ¡

5. **å†…å®¹è¿‡æ»¤**ï¼š
   - éªŒè¯ç”¨æˆ·è¾“å…¥
   - è¿‡æ»¤æ•æ„Ÿä¿¡æ¯
   - å®ç°å†…å®¹å®¡æ ¸æœºåˆ¶

